# CIS Benchmark practice for Kubernetes cluster setup

## Example 1

- Fix kubelet configuration by editing `/var/lib/kubelet/config.yaml`

```yaml
authentication:
  anonymous:
    enabled: false
  webhook:
    enabled: true
authorization:
  mode: Webhook
protectKernelDefaults: true
```

- Restart the kubelet

```bash
systemctl restart kubelet.service
systemctl status kubelet.service
```

- Fix kube-apiserver configuration by editing  `/etc/kubernetes/manifests/kube-apiserver.yaml`

```yaml
--authorization-mode=Node,RBAC
--profiling=false
```

- Fix etcd configuration by editing `/etc/kubernetes/etcd.yaml` (move from `/etc/kubernetes/manifests/etcd.yaml`?)

```yaml
--client-cert-auth=true
```
