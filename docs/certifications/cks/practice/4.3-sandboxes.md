# Sandboxes

## gVizor

Look at the Container Runtime Interface (CRI) configuration with containerd, in `/etc/containerd/config.toml`, under the handlers section:

```ini
[plugins.cri.containerd.runtimes.runsc]
runtime_type = "io.containerd.runsc.v1"
```

Create a RuntimeClass:

```yaml
apiVersion: node.k8s.io/v1 
kind: RuntimeClass
metadata:
  name: gvisor  
handler: runsc
```

Create a Deployment manifest file with `kubectl create deploy test --image=nginx --dry-run=client -o yaml > deploy.yaml` and edit it to add runtimeClassName:

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: test
  name: test
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test
  template:
    metadata:
      labels:
        app: test
    spec:
      runtimeClassName: gvisor
      containers:
        - image: nginx
      name: nginx
```

On the newlu created Pod, test if it uses gViser sandbox:

```bash
kubectl exec test-xxxx -- dmesg
```
